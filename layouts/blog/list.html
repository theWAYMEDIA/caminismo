<!DOCTYPE html>
<html lang="{{ .Site.LanguageCode }}">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ .Title }} | {{ .Site.Title }}</title>
    <meta name="description" content="{{ .Params.description | default .Summary }}">
    <link rel="stylesheet" href="/css/blog.css">
</head>
<body>
    <header class="site-header">
        <div class="container">
            <h1><a href="/">{{ .Site.Title }}</a></h1>
            <nav>
                {{ range .Site.Menus.main }}
                    <a href="{{ .URL }}">{{ .Name }}</a>
                {{ end }}
            </nav>
        </div>
    </header>

    <main class="blog-main">
        <div class="container">
            
            <!-- Blog Header Section -->
            <header class="blog-header">
                <h1>{{ .Title }}</h1>
                {{ with .Params.description }}
                    <p class="blog-tagline">{{ . }}</p>
                {{ end }}
            </header>

            <!-- Blog Introduction (from _index.md content) -->
            {{ if .Content }}
            <section class="blog-intro">
                {{ .Content }}
            </section>
            {{ end }}

            <!-- Blog Posts Listing -->
            <section class="blog-posts">
                <h2>Art√≠culos Recientes</h2>
                
                {{ $pages := where .Pages "Type" "blog" }}
                {{ $pages := where $pages "Params.draft" "!=" true }}
                {{ range $pages.ByDate.Reverse }}
                    <article class="post-preview">
                        <h3><a href="{{ .Permalink }}">{{ .Title }}</a></h3>
                        
                        <div class="post-meta">
                            <time datetime="{{ .Date.Format "2006-01-02" }}">
                                {{ .Date.Day }} de {{ index (slice "enero" "febrero" "marzo" "abril" "mayo" "junio" "julio" "agosto" "septiembre" "octubre" "noviembre" "diciembre") (sub .Date.Month 1) }} de {{ .Date.Year }}
                            </time>
                            {{ with .Params.category }}
                                <span class="category">{{ . }}</span>
                            {{ end }}
                            {{ with .Params.author }}
                                <span class="author">por {{ . }}</span>
                            {{ end }}
                        </div>

                        {{ with .Params.excerpt }}
                            <p class="excerpt">{{ . }}</p>
                        {{ else }}
                            <p class="excerpt">{{ .Summary }}</p>
                        {{ end }}

                        {{ with .Params.tags }}
                        <div class="tags">
                            {{ range . }}
                                <span class="tag">#{{ . }}</span>
                            {{ end }}
                        </div>
                        {{ end }}

                        <a href="{{ .Permalink }}" class="read-more">Leer m√°s ‚Üí</a>
                    </article>
                {{ end }}
            </section>

            <!-- Categories Section -->
            {{ with .Site.Taxonomies.categories }}
            <aside class="blog-categories">
                <h2>Explorar por Categor√≠a</h2>
                <ul>
                    {{ range $name, $taxonomy := . }}
                        <li>
                            <a href="/categories/{{ $name | urlize }}">
                                {{ $name | title }} ({{ len $taxonomy }})
                            </a>
                        </li>
                    {{ end }}
                </ul>
            </aside>
            {{ end }}

        </div>
    </main>

    <footer class="site-footer">
        <div class="container">
            <p>ü¶ã {{ .Site.Params.author }} | <a href="/faq/">FAQ</a> | <a href="/glosario/">Glosario</a> | <a href="https://wayist.life">Comunidad</a></p>
        </div>
    </footer>
</body>
</html>
